# Standalone test configuration for the verifier receiver
# 
# Run with:
#   cd opentelemetry-collector-components
#   make genelasticcol
#   ./_build/elastic-collector-components --config ./receiver/verifierreceiver/testdata/standalone-test.yaml
#
# For AWS Cloud Connector authentication:
#   1. Set the role_arn to the IAM role ARN in the target AWS account
#   2. Set the external_id to the value from Cloud Connector setup
#
# Without provider credentials, the receiver will still run but report "error" status
# with "VerifierNotInitialized" for permissions requiring those providers.

receivers:
  verifier:
    # Cloud Connector Identification
    cloud_connector_id: "cc-test-12345"
    cloud_connector_name: "Local Test Connector"
    
    # Verification Session
    verification_id: "verify-local-001"
    verification_type: "on_demand"
    
    # Provider Credentials
    # Uncomment and configure with real values for production testing
    providers:
      # AWS Authentication - Cloud Connector STS AssumeRole
      aws:
        credentials:
          # role_arn: "arn:aws:iam::123456789012:role/ElasticAgentRole"
          # external_id: "your-external-id-from-elastic"
          default_region: "us-east-1"
      
      # Azure Authentication (future)
      # azure:
      #   credentials:
      #     tenant_id: "your-tenant-id"
      #     client_id: "your-client-id"
      #     client_secret: "your-client-secret"
      #     subscription_id: "your-subscription-id"
      
      # GCP Authentication (future)
      # gcp:
      #   credentials:
      #     project_id: "your-project-id"
      #     use_default_credentials: true
      
      # Okta Authentication (future)
      # okta:
      #   credentials:
      #     domain: "dev-123456.okta.com"
      #     api_token: "your-api-token"
    
    # Policies and Integrations
    policies:
      - policy_id: "policy-aws-security"
        policy_name: "AWS Security Monitoring"
        integrations:
          - integration_id: "int-cloudtrail-001"
            integration_type: "aws_cloudtrail"
            integration_name: "AWS CloudTrail"
            integration_version: "2.17.0"
            config:
              account_id: "123456789012"
              region: "us-east-1"
          - integration_id: "int-guardduty-001"
            integration_type: "aws_guardduty"
            integration_name: "AWS GuardDuty"
            integration_version: "1.5.0"
            config:
              account_id: "123456789012"
              region: "us-east-1"
      - policy_id: "policy-aws-infra"
        policy_name: "AWS Infrastructure"
        integrations:
          - integration_id: "int-s3-001"
            integration_type: "aws_s3"
            integration_name: "AWS S3 Logs"
            integration_version: "1.0.0"
            config:
              account_id: "123456789012"
              region: "us-west-2"

exporters:
  debug:
    verbosity: detailed

service:
  pipelines:
    logs:
      receivers: [verifier]
      exporters: [debug]
